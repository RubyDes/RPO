# Архитектурные требования для системы E-Learning

Требования к системе формулируются в разрезе нефункциональных требований, ограничений и принципов.

## Нефункциональные требования

### Производительность (Performance)

- **PER01**: Время реакции системы при редактировании курса или материалов преподавателем не должно превышать **2 секунд**.
- **PER02**: Время отображения списочных данных (каталог курсов, список студентов) с применением фильтров не должно превышать **3 секунд**.
- **PER03**: Время запуска потокового видео с момента клика до начала воспроизведения не должно превышать **2 секунд** при скорости сети 10 Мбит/с.
- **PER04**: Время проверки и отображения результатов автоматизированного теста не должно превышать **5 секунд**.
- **PER05**: Время генерации и загрузки сертификата (PDF) не должно превышать **10 секунд**.

### Масштабируемость (Scalability)

- **SCA01**: Преподаватель активно работает с системой ~2 часа в день, создавая/редактируя материалы, проверяя задания, общаясь со студентами.
- **SCA02**: Студент проводит в системе ~1-3 часа в день, просматривая видео, проходя тесты, участвуя в обсуждениях.
- **SCA03**: На момент запуска ожидается **5 000** активных пользователей (одновременная работа ~500-1000).
- **SCA04**: Через год ожидается рост до **20 000** активных пользователей.
- **SCA05**: Через 3 года — до **50 000** пользователей.
- **SCA06**: Через 5 лет — до **100 000** пользователей с пиковой нагрузкой до 10 000 одновременных подключений.

### Доступность (Availability)

- **AVA01**: Допустимый процент отказа или обслуживания системы составляет **99.7%** (не более 26 часов простоя в год).
- **AVA02**: Окно для планового технического обслуживания: с **03:00 до 05:00 по московскому времени** в воскресенье.

### Безопасность и аудит (Security)

- **SEC01**: Система должна соответствовать требованиям ФЗ-152 "О персональных данных" и политике информационной безопасности организации-заказчика.
- **SEC02**: Система обрабатывает персональные данные (ПДн) пользователей. Требуется обеспечить соответствующие меры защиты и, при необходимости, аттестацию.
- **SEC03**: Доступ к внешним ресурсам (интернет) из контура приложения требуется для стриминга видео (CDN), отправки email-уведомлений и обновления компонентов.
- **SEC04**: Требуется полный аудит критичных действий: вход/выход, изменение оценок, выдача сертификатов, изменение материалов курса, назначение прав.
- **SEC05**: Реализация ролевой модели доступа (RBAC) с четким разделением прав для Студента, Преподавателя, Администратора, Техподдержки.
- **SEC06**: Защита авторского контента (видео, документы) от несанкционированного скачивания и распространения.

### Надежность (Durability, Disaster Recovery)

- **DUR01**: Ежедневное полное резервное копирование баз данных и инкрементальное — каждые 4 часа.
- **DUR02**: Резервное копирование файлового хранилища (материалы курсов) — раз в сутки.
- **DUR03**: Цель точки восстановления (RPO) — не более **15 минут** потери данных транзакций.
- **DUR04**: Цель времени восстановления (RTO) — не более **1 часа** для полного восстановления работоспособности после серьезного сбоя.
- **DUR05**: Требуется резервирование критичных компонентов (веб-серверы, СУБД, хранилище) для обеспечения отказоустойчивости.

### Мониторинг (Monitoring)

- **MON01**: Требуется комплексный мониторинг: доступность сервисов (HTTP-чеки), загрузка CPU/RAM/диска, метрики производительности (время ответа API), бизнес-метрики (количество активных пользователей, сданных тестов).
- **MON02**: В организации есть стандартный стек мониторинга (Prometheus/Grafana, Zabbix). Интеграция с ним предпочтительна.
- **MON03**: Наличие централизованной системы сбора и анализа логов (ELK Stack или аналог).

### Организационные и юридические вопросы (Legal, Regulatory and Compliance)

- **LRC01**: Система должна обеспечивать хранение истории изменений учебных материалов и оценок для разрешения возможных академических споров.
- **LRC02**: Сертификаты должны содержать юридически значимую информацию и быть защищены от подделки (электронная подпись, QR-код для проверки).
- **LRC03**: Необходимо соблюдение авторских прав на размещаемый в системе контент.

### Локализация и интернационализация (I18n, L10n)

- **L10N01**: На первом этапе — поддержка **русского** языка интерфейса.
- **L10N02**: Архитектура должна позволять легко добавлять новые языки интерфейса (английский, казахский и др.).
- **L10N03**: Контент курсов (материалы, тесты) может быть на любом языке, перевод не требуется от системы.

### Целевые платформа и устройства пользователей

- **PLT01**: Веб-интерфейс должен корректно работать в последних версиях браузеров: **Chrome, Firefox, Safari, Edge, Yandex Browser**.
- **PLT02**: Адаптивный дизайн для устройств с шириной экрана от **360px** (мобильные) до **1920px+** (десктоп).
- **PLT03**: Мобильное приложение (нативное или PWA) для **iOS 14+** и **Android 8.0+**.
- **PLT04**: Поддержка основных производителей мобильных устройств (Apple, Samsung, Xiaomi, Huawei и др.).
- **PLT05**: Поддержка стандартов доступности (**WCAG 2.1 AA**) для лиц с ограниченными возможностями.

## Ограничения

- **LIM01**: Бюджет на инфраструктуру ограничен, необходимо использовать облачные сервисы с моделью оплаты по мере использования (IaaS/PaaS).
- **LIM02**: Основная команда разработки имеет экспертизу в **Python (Django/Flask)** и **JavaScript (React)**, что определяет стек технологий бэкенда и фронтенда.
- **LIM03**: Срок вывода первой рабочей версии (MVP) на рынок — **6 месяцев**.
- **LIM04**: На первом этапе интеграция только с одной платежной системой (например, ЮKassa) и корпоративной Active Directory.
- **LIM05**: Система должна быть развернута в дата-центре на территории **РФ** для соблюдения 152-ФЗ.

## Принципы

- **PRN01**: **API-First**: Все ключевые функции системы должны быть доступны через четко документированное API (REST/GraphQL) для обеспечения гибкости интеграций и развития.
- **PRN02**: **Микросервисная/Модульная архитектура**: Разделение системы на слабосвязанные сервисы/модули (Пользователи, Курсы, Контент, Тестирование, Уведомления) для независимого масштабирования и развертывания.
- **PRN03**: **Stateless-бэкенд**: Серверы приложений не должны хранить состояние сессии пользователя, что обеспечивает горизонтальную масштабируемость и отказоустойчивость.
- **PRN04**: **Кеширование на всех уровнях**: Активное использование кеша (CDN для статики и видео, Redis для часто запрашиваемых данных) для повышения производительности и снижения нагрузки.
- **PRN05**: **Асинхронность**: Долгие и ресурсоемкие операции (кодирование видео, генерация отчетов, массовая рассылка) выполняются асинхронно через очереди задач.
- **PRN06**: **Принцип наименьших привилегий**: Пользователи и компоненты системы получают минимальный набор прав, необходимых для выполнения их задач.
- **PRN07**: **Непрерывная доставка и мониторинг**: Автоматизация процессов сборки, тестирования и развертывания. Работоспособность и ключевые метрики системы постоянно отслеживаются.