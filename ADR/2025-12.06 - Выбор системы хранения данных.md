**Дата:** 06 декабря 2025 г.

**Статус:** Принято

**Контекст:**

Платформа онлайн-обучения требует основную систему хранения данных для структурированной информации: пользователи, курсы, прогресс обучения, результаты тестов, материалы курсов. Необходимо выбрать реляционную СУБД, обеспечивающую надежность транзакций, производительность при высоких нагрузках, совместимость с выбранным стеком технологий и возможность хранить как строго структурированные, так и частично структурированные данные.

**Рассмотренные варианты:**

1. **MySQL:** Популярная реляционная СУБД с открытым исходным кодом, отличной производительностью и широкой экосистемой.
2. **PostgreSQL:** Продвинутая объектно-реляционная СУБД с расширенной поддержкой JSON и сложных типов данных.
3. **MariaDB:** Форк MySQL с некоторыми дополнительными функциями.
4. **SQLite:** Встраиваемая легковесная СУБД.

**Решение:**

Выбран **MySQL** в качестве основной системы хранения данных.

**Обоснование:**

1. **Производительность и оптимизация для чтения:**
   - MySQL исторически оптимизирована для операций SELECT, что критично для платформы обучения, где преобладают операции чтения (просмотр курсов, материалов, прогресса)
   - Эффективное кэширование запросов и буферного пула для ускорения доступа к часто используемым данным

2. **Масштабируемость и репликация:**
   - Встроенная поддержка мастер-реплика репликации для горизонтального чтения
   - Возможность шардинга для распределения нагрузки при росте количества пользователей
   - Поддержка кластеризации через MySQL Cluster или сторонние решения

3. **Экосистема и поддержка в облачных провайдерах:**
   - Широкая поддержка во всех major облачных платформах (AWS RDS, Google Cloud SQL, Azure Database for MySQL)
   - Богатый набор инструментов мониторинга, бэкапа и управления
   - Большое сообщество и доступность специалистов на рынке

4. **Баланс строгой структуры и гибкости:**
   - Поддержка JSON типа данных с версии 5.7 для хранения гибких структур (конфигурация тестов, метаданные курсов, настройки пользователей)
   - Возможность индексирования JSON полей для производительных запросов
   - Совместимость с реляционной моделью для критичных транзакций (прогресс обучения, результаты тестов)

5. **Безопасность и надежность:**
   - Поддержка SSL-шифрования соединений
   - Механизмы аутентификации и авторизации
   - ACID-совместимость через движок InnoDB для гарантии целостности данных
   - Поддержка транзакций для критичных операций (регистрация на курс, сдача теста)

6. **Оптимизация для веб-приложений:**
   - Эффективная работа с соединениями (connection pooling)
   - Поддержка полнотекстового поиска для каталога курсов
   - Возможность хранения BLOB данных для небольших медиафайлов

**Технические детали реализации:**
- Движок хранения: InnoDB (поддержка транзакций, внешних ключей, MVCC)
- Кодировка: utf8mb4 для полной поддержки Unicode
- Уровень изоляции: READ COMMITTED
- Connection pooling на уровне приложения
- Регулярные оптимизации индексов и запросов

**Последствия:**

1. **Положительные:**
   - Снижение операционных расходов за счет единой технологии хранения
   - Упрощение разработки и сопровождения благодаря единой модели данных
   - Легкость найма квалифицированных специалистов
   - Предсказуемая производительность при типичных сценариях использования

2. **Требуемые меры:**
   - Необходимо тщательное проектирование схемы БД с учетом денормализации для оптимизации запросов
   - Требуется регулярный мониторинг производительности (slow queries, connection pool)
   - Нужно настроить стратегию резервного копирования и репликации
   - Следует внедрить систему миграций базы данных (Flyway/Liquibase)
   - Необходимо контролировать размер JSON документов (максимальный размер 1GB, рекомендуется до 10MB)

3. **Компромиссы:**
   - Ограниченная поддержка сложных типов данных по сравнению с PostgreSQL
   - Меньшая функциональность JSON операций, чем в PostgreSQL
   - Требуется дополнительная настройка для полнотекстового поиска на русском языке

**Рекомендации:**
- Использовать облачный managed-сервис MySQL для снижения операционных затрат
- Внедрить кэширование на уровне приложения для часто запрашиваемых данных
- Реализовать асинхронную обработку тяжелых аналитических запросов