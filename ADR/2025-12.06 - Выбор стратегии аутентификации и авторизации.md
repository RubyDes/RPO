**Дата:** 06 декабря 2025 г.

**Статус:** Принято

**Контекст:**

Система требует надежной аутентификации для различных типов пользователей, ролевой модели доступа (студент, преподаватель, администратор), поддержки социальных логинов и интеграции с корпоративными системами (например, Active Directory для сотрудников).

**Рассмотренные варианты:**

1. **Собственная реализация:** JWT + сессии в Redis.
2. **Identity Provider:** Keycloak, Auth0, Okta.
3. **Social Login + собственная БД:** Google/Facebook + своя система ролей.
4. **OAuth2/OpenID Connect провайдер:** Spring Security OAuth2.

**Решение:**

Выбран **Keycloak как Identity Provider**.

**Обоснование:**

- **Единая точка управления:** Централизованное управление пользователями, ролями, правами. (Обеспечивает SEC05, SEC06, PRN06)
- **Стандарты:** Поддержка OAuth2, OpenID Connect, SAML. (Обеспечивает SEC01, SEC02, PRN01)
- **Гибкость:** Возможность интеграции с различными провайдерами (социальные сети, корпоративные LDAP/Active Directory). (Обеспечивает LIM04, SEC01, PRN01)
- **Безопасность:** Встроенные механизмы безопасности (MFA, блокировка при подозрительной активности). (Обеспечивает SEC01-SEC06)
- **Открытый исходный код:** Прозрачность и возможность кастомизации. (Обеспечивает контроль в рамках LIM05)
- **Административный интерфейс:** Удобное управление для администраторов системы. (Обеспечивает поддержку роли администратора по SEC05)

**Архитектура:**
- Keycloak как центральный IdP
- RBAC (Role-Based Access Control)
- JWT токены для микросервисов
- Сессии в Redis для веб-интерфейса

**Последствия:**

- Необходимо развернуть и поддерживать кластер Keycloak.
- Требуется интеграция всех микросервисов с Keycloak.
- Следует настроить синхронизацию с корпоративными системами (при необходимости).